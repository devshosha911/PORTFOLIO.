<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Post | Portfolio</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="enhancements.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Markdown rendering -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        .post-container {
            max-width: 800px;
            margin: 6rem auto 2rem;
            padding: 0 2rem;
        }

        .post-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .post-title {
            font-size: 3rem;
            color: var(--main-color);
            margin-bottom: 1rem;
        }

        .post-meta {
            display: flex;
            gap: 2rem;
            justify-content: center;
            color: #888;
            font-size: 1rem;
        }

        .post-image {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 1rem;
            margin-bottom: 2rem;
        }

        .post-content {
            line-height: 1.8;
            font-size: 1.1rem;
            color: #ddd;
        }

        .post-content h2 {
            color: var(--main-color);
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        .post-content h3 {
            color: #fff;
            margin-top: 1.5rem;
        }

        .post-content p {
            margin-bottom: 1.5rem;
        }

        .post-content code {
            background: rgba(212, 175, 55, 0.1);
            color: var(--main-color);
            padding: 0.2rem 0.5rem;
            border-radius: 0.3rem;
            font-family: 'Courier New', monospace;
        }

        .post-content pre {
            background: #1a1a20;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            margin: 1rem 0;
        }

        .post-content pre code {
            background: none;
            padding: 0;
        }

        .post-tags {
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tag {
            display: inline-block;
            background: rgba(212, 175, 55, 0.1);
            color: var(--main-color);
            padding: 0.5rem 1rem;
            border-radius: 2rem;
            margin-right: 0.5rem;
            font-size: 0.9rem;
        }

        .back-btn {
            display: inline-block;
            padding: 1rem 2rem;
            background: var(--main-color);
            color: #000;
            border-radius: 0.5rem;
            text-decoration: none;
            margin-top: 2rem;
            font-weight: 600;
        }
    </style>
</head>

<body>
    <div class="post-container">
        <div class="post-header">
            <h1 class="post-title" id="post-title"></h1>
            <div class="post-meta">
                <span id="post-date"></span>
                <span id="post-read-time"></span>
                <span id="post-author"></span>
            </div>
        </div>

        <img id="post-image" class="post-image" alt="">

        <div class="post-content" id="post-content"></div>

        <div class="post-tags" id="post-tags"></div>

        <a href="blog.html" class="back-btn">
            <i class="fa-solid fa-arrow-left"></i> Back to Blog
        </a>
    </div>

    <script>
        // Get post ID from URL
        const urlParams = new URLSearchParams(window.location.search);
        const postId = urlParams.get('id');

        // Load post from localStorage
        const posts = JSON.parse(localStorage.getItem('blogPosts') || '[]');
        const post = posts.find(p => p.id == postId);

        if (post) {
            document.title = post.title + ' | Portfolio Blog';
            document.getElementById('post-title').textContent = post.title;
            document.getElementById('post-date').innerHTML = '<i class="fa-solid fa-calendar"></i> ' + post.date;
            document.getElementById('post-read-time').innerHTML = '<i class="fa-solid fa-clock"></i> ' + (post.readTime || '5') + ' min read';
            document.getElementById('post-author').innerHTML = '<i class="fa-solid fa-user"></i> ' + (post.author || 'Admin');

            if (post.image) {
                document.getElementById('post-image').src = post.image;
            } else {
                document.getElementById('post-image').style.display = 'none';
            }

            // Render markdown content
            document.getElementById('post-content').innerHTML = marked.parse(post.content);

            // Render tags
            document.getElementById('post-tags').innerHTML = `
                <strong>Tags:</strong> 
                ${post.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
            `;
        } else {
            document.querySelector('.post-container').innerHTML = `
                <div style="text-align: center; padding: 4rem 0;">
                    <h2 style="color: var(--main-color);">Post Not Found</h2>
                    <p style="color: #888;">The blog post you're looking for doesn't exist.</p>
                    <a href="blog.html" class="back-btn">Back to Blog</a>
                </div>
            `;
        }
    </script>
</body>

</html>